# ツールの設定
 ![インターフェース](./md_ui_full.png)<br>
 ※画像は古いバージョンや開発中バージョンの場合があります<br>

## メニューバー
 - **設定 - CPU使用率低減モード**<br>
 画像や音楽の並列処理数を抑える機能です<br>
 並行して別の作業を行いたい時や、冷却が不十分で長時間CPUに負荷をかけられない場合に使ってください<br>

 - **設定 - ハード変更**<br>
 変換先ハードを変更します<br>

 - **設定 - 終了**<br>
 本ソフトを終了します 右上☒と全く同じ動作です<br>

 - **ツール - 連番動画無効化ファイル作成**<br>
 指定したディレクトリに専用のファイルを作ります<br>
 このファイルが0.txtと同じところにあると、<br>
 本ツールで変換した連番動画の再生が全てスキップされるようになります<br>

 - **ツール - nscript.dat復号化**<br>
 選択したnscript.datを復号化します<br>
 変換時に自動復号されるため通常は本機能は必要ありません<br>
 変換前に0.txtを手動で編集しなければならない時などに使ってください<br>

 - **ツール - GARbroを起動**<br>
 単にGARbroを起動するだけです<br>
 本ソフトを終了すると一緒に終了するので気をつけてください<br>

 - **このソフトについて - サイトを開く**<br>
 本ソフトのGitHubのURLに飛びます<br>

 - **このソフトについて - 権利者表記**<br>
 ツール名および作者名を表示します<br>


## 上段メニュー
 - **入力元**<br>
 [Browse]からゲーム用ディレクトリを指定します<br>
 v2.3.7から、自動的にゲームを検出して一覧表示する[一覧から選択]も利用できるようになりました<br>

 - **出力先**<br>
 [Browse]から出力先の任意のディレクトリを指定します<br>
 実際は`result_{選択したハード名}_{入力元のディレクトリ名}`へ保存されます<br>
 ちなみにディレクトリ名が競合した場合元のデータを**勝手に消す**ので注意！<br>
 v2.3.7から、デスクトップに自動設定する[既定値に設定]も利用できるようになりました<br>

 - **個別設定**<br>
 元々は"ONSコンバータ"として、別リポジトリで管理していたものです<br>
 ONScripterではない特定の作品をONScripterで動作する形式に強制変換します<br>
 変換することで一部機能が失われたり演出が劣化したりする場合があります<br>
 

## 画像
 - **変換する際の解像度が複数選択可能な場合**<br>
 解像度指定機能です<br>
 容量を限界まで下げたい場合"低解像度優先"を選択してください<br>

 - **JPEG品質**<br>
 JPEGに変換された画像の品質を指定します<br>
 数値が低いほど容量が少なく、高いほど画質がきれいです<br>

 - **PNGを減色**<br>
 使える色数に制限のある"8bitPNG"へ変換し、大幅に容量を減らすことが出来ます<br>
 減色するかどうかと減色する際の色数を指定します<br>

 - **透過形式"l","r"以外のBMPを検出しJPEGへ変換**<br>
 透過機能を使ってなさそうなビットマップ画像を検出し、<br>
 JPEG形式に変換するようにします<br>

 - **一般的な非PNGの横解像度を特定の倍数にする**<br>
 画像の横解像度を特定の倍数にすることによって、<br>
 縮小した画像に立ち絵の横に謎の縦線が表示される不具合を回避します<br>
 

## 音楽
 - **BGMフォーマット、SE/VOICEフォーマット**<br>
 音声変換形式を選択します<br>
 ちなみにBGMかそれ以外かの判別は、<br>
 "bgm命令で呼ばれたか"と"ファイルパスにbgmという文字列があるか"で行っています<br>

 - **BGMチャンネル数、SE/VOICEチャンネル数**<br>
 音声変換形式を選択します<br>
 ステレオ(2ch)かモノラル(1ch)かです<br>

 その他については意味が分かる人のみいじってください<br>
 基本的にやってることはffmpegに渡すパラメータの調整です<br>


## 動画
 - **動画フォーマット**<br>
 動画変換形式を選択します<br>
 ハードによって選択できる形式に制限があり、<br>
 非対応フォーマットを選ぶと変換時にエラーが発生します<br>

 同じくその他については意味が分かる人のみいじってください<br>
 こちらも基本的にやってることはffmpegに渡すパラメータの調整です<br>


## その他
 - **画像圧縮先、BGM圧縮先、SE/VOICE圧縮先、連番利用時動画圧縮先**<br>
 それぞれどのnsaに圧縮するか、また圧縮しないかを選べます<br>
 全て一つのnsaにまとめたい、BGMは圧縮したくない等の場合は適宜変更してください<br>

 - **拡張子".dll"のファイルを全て除外**<br>
 名前のとおり、変換前の展開時に拡張子.dllのファイルを除外します<br>
 「.dllに拡張子偽装した動画ファイルを使っている」などの特殊事情がない限り、<br>
 基本的にはチェックつけっぱなしでいいと思います<br>

 - **ファイル"Thumbs.db"を全て除外**<br>
 同じく名前のとおり、変換前の展開時にThumbs.dbを除外します<br>
 意味もなく入れっぱなしになっているゲームがあまりにも多いので実装しました<br>
 基本的にはチェックつけっぱなしでいいと思います<br>

 - **画面表示**<br>
 ons.iniの"SURFACE"と"ASPECT"を書き換え、<br>
 PSP表示時に画面を拡大するかどうかを選択できます<br>

 - **常にメモリ内にフォントを読み込んでおく**<br>
 PSPで動作させる際、常にフォントをRAMに読み込ませ、<br>
 文字表示を高速化させるかどうかの設定です<br>
 RAMの消費量が増えるためPSP-1000での利用は非推奨<br>
 (処理としてはons.iniの"FONTMEMORY"を書き換えてるだけ)<br>

 - **マウスカーソルを利用**<br>
 PSPで動作させる際、マウスカーソルを利用するかを選べます<br>
 (処理としてはons.iniの"ANALOGKEY"を書き換えてるだけ)<br>

 - **nbz変換設定**<br>
 NScripter独自の圧縮形式".nbz"を展開する際の処理を選べます<br>

 - **avi命令->mpegplay命令変換**<br>
 名前のとおりです aviがうまく使えない端末用<br>

 - **screenshot系命令無効化**<br>
 スクリーンショット関連の命令を無効化します<br>
 動作が重い命令なので低スペック端末では無効化したほうが良いと思います<br>

 - **maxkaisoupage最大値指定**<br>
 バックログで遡れるテキスト数を制限します<br>
 下げれば下げるほど突然のフリーズや謎のセーブ失敗が発生しにくくなります<br>

 - **savenumber上書き**<br>
 セーブデータの最大数を変更します<br>
 NScripter標準のセーブ画面を使っていない作品の場合は、<br>
 「textgosub命令無効化」も併用してください<br>

 - **setwindow/setwindow3文字潰れ防止**<br>
 表示する際に小さすぎて読めないと思われる文字を、<br>
 強制的に文字が潰れない程度のサイズまで拡大します<br>
 ※拡大できる文字はsetwindow命令のみです<br>

 - **okcancelbox命令強制ok**<br>
 OK/キャンセル のメッセージウィンドウ選択をすべて"OK"判定にします<br>
 メッセージウィンドウが出せない端末向け<br>

 - **yesnobox命令強制yes**<br>
 はい/いいえ のメッセージウィンドウ選択をすべて"はい"判定にします<br>
 メッセージウィンドウが出せない端末向け<br>

 - **rnd2命令->rnd命令変換**<br>
 rnd2命令を専用の関数を自作したうえでrnd命令を使った形に置き換えます<br>
 古いバージョンのONScripterだとrnd2命令非対応なので作りました<br>

 - **textgosub命令無効化**<br>
 右クリック(またはそれに相当するボタン)時に出てくるメニューを、<br>
 NScripter標準のrmenu命令で出てくる形式のものに変更します<br>
 元のメニューの動作が重かったり不安定だったりする場合に使ってください<br>

 - **コメントアウト部分を削除**<br>
 名前のとおりです 0.txtの軽量化用<br>
 記述方法の関係で一部コメントが残る場合があります<br>


## 下段メニュー
 - **convert**<br>
 ここを押すと変換開始<br>


[convert]を押してしばらく(ゲームや設定、PC性能によって変わります)待ったあと、<br>
"処理が終了しました"と表示されたら変換完了です<br>
